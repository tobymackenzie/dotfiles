#!/bin/bash
if [ $# -gt 1 ]; then
	files=("${@:2}")
else
	files=(*)
fi
for file in "${files[@]}"; do
	if [ -d "$file" ] && [ -d "$file/.git" ]; then
		if [ $# -gt 0 ]; then
			echo '-------' "$file"
			if cd "$file"; then
				eval git "$1"
				#-! is `>&` posix?
				cd - > /dev/null 2>&1 || exit 1
			else
				echo "Error: no such directory"
				continue
			fi
		else
			basename "$file"
		fi
	fi
done
