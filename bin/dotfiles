#!/bin/bash -i
binPath=`dirname ${BASH_SOURCE[0]}`
if [ -z "$1" ]; then
	if [ -e `${binPath}/_dotfilesGetBaseDir` ]; then
		cmd='update'
	else
		cmd='init'
	fi
else
	cmd="$1"
fi
cd $binPath/..
case $cmd in
	'u'|'up'|'update')
		echo 'updating dotfiles'
		git pull --autostash ${@:2}
	;;
	'i'|'info'|'help')
		less README.md
	;;
	'init'|'install')
		${binPath}/_dotfilesInit ${@:2}
	;;
	'bin')
		ls -1A bin ${@:2}
	;;
	'd'|'diff')
		git diff --color-words -w ${@:2}
	;;
	'g'|'git')
		git ${@:2}
	;;
	'l'|'ls')
		ls -1AFh --color ${@:2}
	;;
	's'|'stat'|'status')
		git status -bs ${@:2}
	;;
	'test'|'tests')
		echo 'running phpunit'
		phpunit --display-deprecations ${@:2}
	;;
	*)
		>&2 echo 'Unknown command'
		exit 1
	;;
esac
