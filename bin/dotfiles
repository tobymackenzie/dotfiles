#!/bin/bash -i
binPath=`dirname ${BASH_SOURCE[0]}`
if [ -z "$1" ]; then
	if [ -e `${binPath}/_dotfilesGetBaseDir` ]; then
		cmd='update'
	else
		cmd='init'
	fi
else
	cmd="$1"
fi
cd $binPath/..
case $cmd in
	'update')
		echo 'updating dotfiles'
		git pull
	;;
	'init'|'install')
		${binPath}/_dotfilesInit
	;;
	'test'|'tests')
		echo 'running phpunit'
		phpunit --display-deprecations
	;;
	*)
		>&2 echo 'Unknown command'
		exit 1
	;;
esac
